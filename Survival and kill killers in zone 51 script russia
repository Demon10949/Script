local player = game:GetService("Players").LocalPlayer
local gui = Instance.new("ScreenGui")
gui.Name = "TeleportGUI"
gui.ResetOnSpawn = false
gui.Parent = player:WaitForChild("PlayerGui")

-- Функция телепорта
local function teleportPlayer(x, y, z)
    local char = player.Character
    if char and char:FindFirstChild("HumanoidRootPart") then
        char.HumanoidRootPart.CFrame = CFrame.new(x, y, z)
    end
end

-- Переменная для хранения элементов
local mainFrame = nil
local miniButton = nil

-- Создание мини-кнопки с изображением
local function createMinimizedButton()
    -- Удаляем старую кнопку если есть
    if miniButton then
        miniButton:Destroy()
    end

    miniButton = Instance.new("ImageButton")
    miniButton.Name = "MiniButton"
    miniButton.Size = UDim2.new(0, 50, 0, 50)
    miniButton.Position = UDim2.new(0, 10, 0.5, -25)
    miniButton.Image = "rbxassetid://124010884667015"
    miniButton.BackgroundTransparency = 1
    miniButton.Active = true
    miniButton.Draggable = true
    miniButton.Parent = gui

    -- Эффекты при наведении
    miniButton.MouseEnter:Connect(function()
        miniButton.Size = UDim2.new(0, 55, 0, 55)
    end)
    
    miniButton.MouseLeave:Connect(function()
        miniButton.Size = UDim2.new(0, 50, 0, 50)
    end)

    miniButton.MouseButton1Click:Connect(function()
        miniButton:Destroy()
        createMainGUI()
    end)
end

-- Создание основного GUI
local function createMainGUI()
    -- Удаляем старый фрейм если есть
    if mainFrame then
        mainFrame:Destroy()
    end

    mainFrame = Instance.new("Frame")
    mainFrame.Name = "MainFrame"
    mainFrame.Size = UDim2.new(0, 220, 0, 160)
    mainFrame.Position = UDim2.new(0.5, -110, 0.5, -80)
    mainFrame.BackgroundColor3 = Color3.fromRGB(40, 40, 40)
    mainFrame.Active = true
    mainFrame.Draggable = true
    mainFrame.Parent = gui

    -- Верхняя панель
    local dragBar = Instance.new("Frame")
    dragBar.Name = "DragBar"
    dragBar.Size = UDim2.new(1, 0, 0, 25)
    dragBar.BackgroundColor3 = Color3.fromRGB(70, 70, 70)
    dragBar.Parent = mainFrame

    -- Кнопка закрытия
    local closeButton = Instance.new("TextButton")
    closeButton.Name = "CloseButton"
    closeButton.Size = UDim2.new(0, 25, 0, 25)
    closeButton.Position = UDim2.new(1, -25, 0, 0)
    closeButton.Text = "X"
    closeButton.BackgroundColor3 = Color3.fromRGB(255, 60, 60)
    closeButton.Parent = mainFrame

    -- Кнопка ТП на спавн
    local spawnButton = Instance.new("TextButton")
    spawnButton.Name = "SpawnButton"
    spawnButton.Size = UDim2.new(0.9, 0, 0, 45)
    spawnButton.Position = UDim2.new(0.05, 0, 0.3, 0)
    spawnButton.Text = "ТП на спавн"
    spawnButton.BackgroundColor3 = Color3.fromRGB(80, 120, 255)
    spawnButton.Parent = mainFrame

    -- Кнопка ТП на место
    local placeButton = Instance.new("TextButton")
    placeButton.Name = "PlaceButton"
    placeButton.Size = UDim2.new(0.9, 0, 0, 45)
    placeButton.Position = UDim2.new(0.05, 0, 0.65, 0)
    placeButton.Text = "ТП то песта"
    placeButton.BackgroundColor3 = Color3.fromRGB(80, 255, 120)
    placeButton.Parent = mainFrame

    -- Обработчики событий
    closeButton.MouseButton1Click:Connect(function()
        mainFrame:Destroy()
        createMinimizedButton()
    end)

    spawnButton.MouseButton1Click:Connect(function()
        teleportPlayer(331.7, 511.5, 397.9)
    end)

    placeButton.MouseButton1Click:Connect(function()
        teleportPlayer(113.7, 335.5, 568.2)
    end)
end

-- Первый запуск
createMainGUI()
